webpackJsonp([1],{"02OT":function(t,e){},"9M+g":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("Tqaz"),r=(o("sWs5"),o("9M+g"),o("7+uW")),i={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var n=o("VU/8")({name:"App"},i,!1,function(t){o("jTjO")},null,null).exports,s=o("/ocq"),d=o("mtWM"),c=o.n(d),l={data:function(){return{message:"My first component",img:"https://esiro.es/wp-content/uploads/2018/08/aditya-chinchure-494048-unsplash.jpg",tickets_bought:0,tickets_availables:100,price:28,money_available:500,money:0,shows_added:[],entradas:[],isShowingCart:!0,logged:!1,is_admin:0,token:"",username:"",shows:[],addShowForm:{place:"",name:"",date:"",price:"",city:"",country:"",total_available_tickets:""},show:!0,editShowForm:{id:"",name:"",place:"",date:"",price:"",city:"",country:"",total_available_tickets:""},show_to_modify:"",addArtistForm:{id:"",name:"",country:"",genre:""},deleteArtistForm:{id:"",name:""}}},methods:{buyTickets:function(){this.tickets_bought+=1,this.refresh_ticket_money()},refresh_ticket_money:function(){this.tickets_availables-=1,this.money_available-=this.price},returnTickets:function(){this.tickets_availables+=1,this.tickets_bought-=1,this.money_available+=this.price},getImage:function(){return""},addEventToCart:function(t){if(this.shows_added.includes(t)){var e=this.shows_added.indexOf(t),o=this.entradas[e];this.entradas.splice(e,1,o+1)}else this.shows_added.push(t),this.entradas.push(1),console.log(this.shows_added)},decrementarEntrada:function(t){var e=this.shows_added.indexOf(t),o=this.entradas[e];this.entradas.splice(e,1,o-1),0===this.entradas[e]&&this.eliminarDelCarro(t)},incremenetarEntrada:function(t){var e=this.shows_added.indexOf(t),o=this.entradas[e];this.entradas.splice(e,1,o+1)},eliminarDelCarro:function(t){var e=this.shows_added.indexOf(t);this.shows_added.splice(e,1),this.entradas.splice(e,1)},getShows:function(){var t=this;c.a.get("https://c2-ticketmonster1.herokuapp.com/shows").then(function(e){t.shows=e.data.shows}).catch(function(t){console.error(t)})},finalizePurchase:function(){for(var t=0;t<this.shows_added.length;t+=1){var e={id_show:this.shows_added[t].id,tickets_bought:this.entradas[t]};this.addPurchase(e)}},addPurchase:function(t){var e=this,o="https://c2-ticketmonster1.herokuapp.com/orders/"+this.username;c.a.post(o,t,{auth:{username:this.token}}).then(function(){console.log("Order done")}).catch(function(t){console.log(t),e.getShows()})},addCompras:function(){for(var t=this,e="https://c2-ticketmonster1.herokuapp.com/orders/"+this.username,o=[],a=0;a<this.shows_added.length;a+=1)o.push(this.shows_added[a].id);var r={id_show:o,tickets_bought:this.entradas};c.a.post(e,r,{auth:{username:this.token}}).then(function(){console.log("Orders done"),alert("S'ha finalitzat correctament la compra");for(;0<t.shows_added.length;)t.eliminarDelCarro(t.shows_added[0])}).catch(function(e){alert("No s'ha pogut finalitzar la compra"),console.log(e),t.getShows()})},veureCistella:function(){this.isShowingCart=!1},veurePanellEnrere:function(){this.getAvailabeMoney(),this.isShowingCart=!0},login:function(){this.$router.replace({path:"/userlogin"})},logout:function(){this.$router.replace({path:"/"}),this.logged=!1,this.is_admin=0,this.token="",this.username="",this.money=0,this.tickets_bought=0,this.entradas=[]},getSuma:function(){var t=0;return this.entradas.forEach(function(e){t+=e}),console.log(t),t},getParameters:function(t){return new URLSearchParams(location.search).get(t)},getAvailabeMoney:function(){var t=this;if(""===this.username||!this.logged)return 0;var e="https://c2-ticketmonster1.herokuapp.com/account/"+this.username;c.a.get(e).then(function(e){t.money=e.data.account.available_money,t.is_admin=e.data.account.is_admin}).catch(function(e){console.error(e),t.username="",t.logged=!1,alert("Username or Password incorrect")})},addNewEvent:function(){this.$refs.addShowModal.show()},updateEvent:function(){this.$refs.editShowModal.show()},onReset:function(t){var e=this;t.preventDefault(),this.initForm(),this.show=!1,this.$nextTick(function(){e.show=!0})},onSubmit:function(t){t.preventDefault(),this.$refs.addShowModal.hide();var e={name:this.addShowForm.name,date:this.addShowForm.date,price:this.addShowForm.price,place:this.addShowForm.place,city:this.addShowForm.city,country:this.addShowForm.country,total_available_tickets:this.addShowForm.total_available_tickets};this.addShow(e),this.initForm()},initForm:function(){this.addShowForm.place="",this.addShowForm.name="",this.addShowForm.date="",this.addShowForm.price="",this.addShowForm.city="",this.addShowForm.country="",this.addShowForm.total_available_tickets="",this.editShowForm.id="",this.editShowForm.name="",this.editShowForm.place="",this.editShowForm.date="",this.editShowForm.price="",this.editShowForm.city="",this.editShowForm.country="",this.editShowForm.total_available_tickets="",this.addArtistForm.name="",this.addArtistForm.country="",this.addArtistForm.genre="",this.deleteArtistForm.id="",this.deleteArtistForm.name=""},addShow:function(t){var e=this;c.a.post("https://c2-ticketmonster1.herokuapp.com/show",t,{auth:{username:this.token}}).then(function(){console.log("Orders done"),e.getShows()}).catch(function(t){console.log(t),e.getShows()})},onSubmitUpdate:function(t){t.preventDefault(),this.$refs.editShowModal.hide();var e={id:this.editShowForm.id,name:this.editShowForm.name,place:this.editShowForm.place,date:this.editShowForm.date,price:this.editShowForm.price,city:this.editShowForm.city,country:this.editShowForm.country,total_available_tickets:this.editShowForm.total_available_tickets};this.updateShow(e),this.initForm()},updateShow:function(t){var e=this,o="https://c2-ticketmonster1.herokuapp.com/show/"+this.editShowForm.id;c.a.put(o,t,{auth:{username:this.token}}).then(function(){console.log("Orders done"),e.getShows()}).catch(function(t){console.log(t),e.getShows()})},onResetUpdate:function(t){var e=this;t.preventDefault(),this.initForm(),this.show=!1,this.$nextTick(function(){e.show=!0})},showWhereModifyArtist:function(t){this.show_to_modify=t,this.$refs.addArtistModal.show()},onSubmitAddArtistInShow:function(t){t.preventDefault(),this.$refs.addArtistModal.hide();var e={name:this.addArtistForm.name,country:this.addArtistForm.country,genre:this.addArtistForm.genre};this.addNewArtist(e)},addNewArtist:function(t){var e=this;c.a.post("https://c2-ticketmonster1.herokuapp.com/artist",t,{auth:{username:this.token}}).then(function(){console.log("Orders done"),e.addArtistInShow(t),e.getShows()}).catch(function(o){console.log(o),e.addArtistInShow(t),e.getShows()})},addArtistInShow:function(t){var e=this,o="https://c2-ticketmonster1.herokuapp.com/show/"+this.show_to_modify.id+"/artist";c.a.post(o,t,{auth:{username:this.token}}).then(function(){console.log("Orders done"),e.getShows()}).catch(function(t){console.log(t),e.getShows()}),this.initForm()},onResetAddArtistInEvent:function(t){var e=this;t.preventDefault(),this.initForm(),this.show=!1,this.$nextTick(function(){e.show=!0})},eventWhereModifyArtist:function(t){this.show_to_modify=t,this.$refs.deleteArtistModal.show()},onSubmitDeleteArtistInShow:function(t){t.preventDefault(),this.$refs.deleteArtistModal.hide(),this.deleteArtistInEvent()},deleteArtistInEvent:function(){var t=this,e="https://c2-ticketmonster1.herokuapp.com/show/"+this.show_to_modify.id+"/artist/"+this.deleteArtistForm.id;c.a.delete(e,{auth:{username:this.token}}).then(function(){console.log("Orders done"),t.getShows()}).catch(function(e){console.log(e),t.getShows()}),this.initForm()},deleteNewArtist:function(t){},removeShow:function(t){var e=this,o="https://c2-ticketmonster1.herokuapp.com/show/"+t.id;c.a.delete(o,{auth:{username:this.token}}).then(function(){console.log("Orders done"),e.initForm(),e.getShows()}).catch(function(t){console.log(t),e.getShows()})},Cargarid:function(){var t=this,e="https://c2-ticketmonster1.herokuapp.com/show/"+this.editShowForm.id;c.a.get(e).then(function(e){t.editShowForm.name=e.data.show.name,t.editShowForm.place=e.data.show.place.name,t.editShowForm.date=e.data.show.date,t.editShowForm.price=e.data.show.price,t.editShowForm.city=e.data.show.place.city,t.editShowForm.country=e.data.show.place.country,t.editShowForm.total_available_tickets=e.data.show.total_available_tickets}).catch(function(t){console.error(t)})}},created:function(){this.getShows(),this.logged=this.$route.query.logged,this.username=this.$route.query.username,this.token=this.$route.query.token,this.getAvailabeMoney()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"page-header float-right"},[a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"btn-toolbar"},[a("div",{staticClass:"btn-group"},[t.logged?a("button",{staticClass:"btn btn-danger btn-lg",on:{click:function(e){return t.logout()}}},[t._v(" Logout")]):t._e(),t._v(" "),t.logged?t._e():a("button",{staticClass:"btn btn-primary btn-lg",on:{click:function(e){return t.login()}}},[t._v(" Login")])])])]),t._v(" "),a("div",{staticClass:"row no-gutters"},[a("h5",[t._v("Total tickets: "+t._s(this.getSuma()))])]),t._v(" "),a("div",{staticClass:"row no-gutters"},[a("h5",[t._v("Available money: "+t._s(this.money)+" €")])])])]),t._v(" "),a("div",{staticClass:"container"},[a("img",{staticStyle:{"margin-bottom":"30px"},attrs:{src:o("RPnE"),alt:"cabecera",width:"100%"}}),a("br"),t._v(" "),t.logged&&1==t.is_admin?a("button",{staticClass:"btn btn-success btn-lg",staticStyle:{margin:"25px"},on:{click:function(e){return t.addNewEvent()}}},[t._v("Add New Event")]):t._e(),t._v(" "),t.logged&&1==t.is_admin?a("button",{staticClass:"btn btn-success btn-lg",staticStyle:{margin:"25px"},on:{click:function(e){return t.updateEvent()}}},[t._v("Update Event")]):t._e()]),t._v(" "),t.isShowingCart?a("div",{staticClass:"container"},[a("div",{staticClass:"row"},t._l(t.shows,function(e){return a("div",{key:e.id,staticClass:"col-lg-4 col-md-6 mb-4"},[a("div",{staticClass:"card"},[a("img",{staticClass:"card-img-top",attrs:{src:t.img,alt:"Card image cap"}}),t._v(" "),a("div",{staticClass:"card-body"},[a("br"),t._v(" "),a("h3",{staticClass:"card-title"},[t._v(t._s(e.name))]),t._v(" "),t._l(e.artists,function(e){return a("div",{key:e.id},[a("h5",[t._v(t._s(e.name))])])}),t._v(" "),a("h6",[t._v(t._s(e.city))]),t._v(" "),a("h6",[t._v(t._s(e.place.name))]),t._v(" "),a("h6",[t._v(t._s(e.date))]),t._v(" "),a("h6",[t._v(t._s(e.price)+" € ")]),t._v(" "),a("div",{staticClass:"card-footer"},[a("h5",[t._v(t._s(e.total_available_tickets))]),t._v(" "),t.logged&&0==t.is_admin?a("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:t.money_available<t.price||t.tickets_availables<1},on:{click:function(o){return t.addEventToCart(e)}}},[t._v(" Add to cart")]):t._e(),t._v(" "),a("p"),t._v(" "),t.logged&&1==t.is_admin?a("b-button",{attrs:{variant:"dark"},on:{click:function(o){return t.showWhereModifyArtist(e)}}},[t._v("Add Artist to Event")]):t._e(),t._v(" "),a("p"),t._v(" "),t.logged&&1==t.is_admin?a("b-button",{attrs:{variant:"dark"},on:{click:function(o){return t.eventWhereModifyArtist(e)}}},[t._v("Delete Artist in Event")]):t._e(),t._v(" "),a("p"),t._v(" "),t.logged&&1==t.is_admin?a("b-button",{attrs:{variant:"danger"},on:{click:function(o){return t.removeShow(e)}}},[t._v("Delete event")]):t._e()],1)],2)])])}),0),t._v(" "),t.logged&&0==t.is_admin?a("button",{staticClass:"btn btn-success btn-lg",on:{click:function(e){return t.veureCistella()}}},[t._v(" Veure cistella")]):t._e()]):a("div",{staticClass:"container"},[t.shows_added.length>0?a("table",{staticStyle:{margin:"auto"}},[t._m(0),t._v(" "),t._l(t.shows_added,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(t.entradas[t.shows_added.indexOf(e)])+"\n      "),a("button",{staticClass:"btn btn-danger btn-lg",attrs:{disabled:t.entradas[t.shows_added.indexOf(e)]<1},on:{click:function(o){return t.decrementarEntrada(e)}}},[t._v("-")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:t.entradas[t.shows_added.indexOf(e)]>=e.total_available_tickets},on:{click:function(o){return t.incremenetarEntrada(e)}}},[t._v("+")])]),t._v(" "),a("td",[t._v(t._s(e.price)+"  €")]),t._v(" "),a("td",[t._v(t._s(t.entradas[t.shows_added.indexOf(e)]*e.price)+" €")]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-danger btn-lg",on:{click:function(o){return t.eliminarDelCarro(e)}}},[t._v(" Delete from cart")])])])})],2):a("p",[t._v("Your cart is currently empty.")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-lg",on:{click:function(e){return t.veurePanellEnrere()}}},[t._v(" Enrere")]),t._v(" "),a("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:t.shows_added.length<1},on:{click:function(e){return t.addCompras()}}},[t._v(" Finalitza Compra")])]),t._v(" "),a("b-modal",{ref:"addShowModal",attrs:{id:"event-modal",title:"Add new event","hide-footer":""}},[t.show?a("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[a("b-form-group",{attrs:{label:"Name:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",placeholder:"Enter event name",required:""},model:{value:t.addShowForm.name,callback:function(e){t.$set(t.addShowForm,"name",e)},expression:"addShowForm.name"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Price:","label-for":"input-2"}},[a("b-form-input",{attrs:{id:"input-2",type:"number",placeholder:"Enter price",required:""},model:{value:t.addShowForm.price,callback:function(e){t.$set(t.addShowForm,"price",e)},expression:"addShowForm.price"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Date:","label-for":"input-3"}},[a("b-form-datepicker",{attrs:{id:"input-3",required:""},model:{value:t.addShowForm.date,callback:function(e){t.$set(t.addShowForm,"date",e)},expression:"addShowForm.date"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Place:","label-for":"input-6"}},[a("b-form-input",{attrs:{id:"input-6",placeholder:"Enter name place",required:""},model:{value:t.addShowForm.place,callback:function(e){t.$set(t.addShowForm,"place",e)},expression:"addShowForm.place"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"city:","label-for":"input-8"}},[a("b-form-input",{attrs:{id:"input-8",placeholder:"Enter city"},model:{value:t.addShowForm.city,callback:function(e){t.$set(t.addShowForm,"city",e)},expression:"addShowForm.city"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"country:","label-for":"input-9"}},[a("b-form-input",{attrs:{id:"input-9",placeholder:"Enter country"},model:{value:t.addShowForm.country,callback:function(e){t.$set(t.addShowForm,"country",e)},expression:"addShowForm.country"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Tickets:","label-for":"input-7"}},[a("b-form-input",{attrs:{id:"input-7",type:"number",placeholder:"Enter tickets"},model:{value:t.addShowForm.total_available_tickets,callback:function(e){t.$set(t.addShowForm,"total_available_tickets",e)},expression:"addShowForm.total_available_tickets"}})],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e()],1),t._v(" "),a("b-modal",{ref:"editShowModal",attrs:{id:"event-modal",title:"Update event",size:"lg","hide-footer":""}},[t.show?a("b-form",{on:{submit:t.onSubmitUpdate,reset:t.onResetUpdate}},[a("b-form-group",{attrs:{label:"Id:","label-for":"input-0"}},[a("b-form-input",{attrs:{id:"input-0",type:"number",placeholder:"Enter id",required:""},on:{change:function(e){return t.Cargarid()}},model:{value:t.editShowForm.id,callback:function(e){t.$set(t.editShowForm,"id",e)},expression:"editShowForm.id"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Name:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",placeholder:"Enter event name"},model:{value:t.editShowForm.name,callback:function(e){t.$set(t.editShowForm,"name",e)},expression:"editShowForm.name"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Price:","label-for":"input-2"}},[a("b-form-input",{attrs:{id:"input-2",type:"number",placeholder:"Enter price",required:""},model:{value:t.editShowForm.price,callback:function(e){t.$set(t.editShowForm,"price",e)},expression:"editShowForm.price"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Date:","label-for":"input-3"}},[a("b-form-datepicker",{attrs:{id:"input-3"},model:{value:t.editShowForm.date,callback:function(e){t.$set(t.editShowForm,"date",e)},expression:"editShowForm.date"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Place:","label-for":"input-6"}},[a("b-form-input",{attrs:{id:"input-6",placeholder:"Enter name place"},model:{value:t.editShowForm.place,callback:function(e){t.$set(t.editShowForm,"place",e)},expression:"editShowForm.place"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"city:","label-for":"input-8"}},[a("b-form-input",{attrs:{id:"input-8",placeholder:"Enter city"},model:{value:t.editShowForm.city,callback:function(e){t.$set(t.editShowForm,"city",e)},expression:"editShowForm.city"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"country:","label-for":"input-9"}},[a("b-form-input",{attrs:{id:"input-9",placeholder:"Enter country"},model:{value:t.editShowForm.country,callback:function(e){t.$set(t.editShowForm,"country",e)},expression:"editShowForm.country"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Tickets:","label-for":"input-7"}},[a("b-form-input",{attrs:{id:"input-7",type:"number",placeholder:"Enter tickets",required:""},model:{value:t.editShowForm.total_available_tickets,callback:function(e){t.$set(t.editShowForm,"total_available_tickets",e)},expression:"editShowForm.total_available_tickets"}})],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e()],1),t._v(" "),a("b-modal",{ref:"addArtistModal",attrs:{id:"event-modal",title:"Add artist","hide-footer":""}},[t.show?a("b-form",{on:{submit:t.onSubmitAddArtistInShow,reset:t.onResetAddArtistInEvent}},[a("b-form-group",{attrs:{label:"Name Artist:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",placeholder:"Enter artist name",required:""},model:{value:t.addArtistForm.name,callback:function(e){t.$set(t.addArtistForm,"name",e)},expression:"addArtistForm.name"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Country artist:","label-for":"input-6"}},[a("b-form-input",{attrs:{id:"input-6",placeholder:"Enter country artist",required:""},model:{value:t.addArtistForm.country,callback:function(e){t.$set(t.addArtistForm,"country",e)},expression:"addArtistForm.country"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Genre artist:","label-for":"input-7"}},[a("b-form-input",{attrs:{id:"input-7",placeholder:"Enter genre artist",required:""},model:{value:t.addArtistForm.genre,callback:function(e){t.$set(t.addArtistForm,"genre",e)},expression:"addArtistForm.genre"}})],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e()],1),t._v(" "),a("b-modal",{ref:"deleteArtistModal",attrs:{id:"event-modal",title:"Delete artist","hide-footer":""}},[t.show?a("b-form",{on:{submit:t.onSubmitDeleteArtistInShow}},[a("b-form-group",{attrs:{label:"Id Artist:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",placeholder:"Enter artist id",required:""},model:{value:t.deleteArtistForm.id,callback:function(e){t.$set(t.deleteArtistForm,"id",e)},expression:"deleteArtistForm.id"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Name Artist:","label-for":"input-2"}},[a("b-form-input",{attrs:{id:"input-2",placeholder:"Enter artist name"},model:{value:t.deleteArtistForm.name,callback:function(e){t.$set(t.deleteArtistForm,"name",e)},expression:"deleteArtistForm.name"}})],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e()],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",[t._v("Event Name")]),t._v(" "),o("th",[t._v("Quantity")]),t._v(" "),o("th",[t._v("Price (€)")]),t._v(" "),o("th",[t._v("Total")]),t._v(" "),o("th")])])}]},h=o("VU/8")(l,u,!1,null,null,null).exports,m={data:function(){return{username:"",password:"",name:"Login",addUserForm:{username:"",password:""},showsignin:!0}},methods:{initForm:function(){this.addUserForm.username="",this.addUserForm.password=""},createAccount:function(){this.showsignin=!1},checkLogin:function(){var t=this,e={username:this.username,password:this.password};c.a.post("https://c2-ticketmonster1.herokuapp.com/login",e).then(function(e){t.logged=!0,t.token=e.data.token,t.find_match=!0,t.getAccount(),alert("S'ha iniciat sessiò"),t.$router.replace({path:"/",query:{username:t.username,logged:t.logged,token:t.token}})}).catch(function(e){console.error(e),t.username="",alert("Username or Password incorrect")})},getAccount:function(){var t=this,e="https://c2-ticketmonster1.herokuapp.com/account/"+this.username;c.a.get(e).then(function(e){t.is_admin=e.data.account.is_admin}).catch(function(e){console.error(e),t.username="",alert("Username or Password incorrect")})},onSubmit:function(t){var e=this;t.preventDefault();var o={username:this.addUserForm.username,password:this.addUserForm.password};c.a.post("https://c2-ticketmonster1.herokuapp.com/account",o).then(function(t){e.logged=!0,e.token=t.data.token,e.find_match=!0,e.getAccount(),e.username=e.addUserForm.username,alert("Compte creat satisfactoriament")}).catch(function(t){console.error(t),e.username="",alert("Error al crear l'usuari")})},onReset:function(t){var e=this;t.preventDefault(),this.initForm(),this.showsignin=!1,this.$nextTick(function(){e.showsignin=!0})},backtoEvents:function(){this.logged=!1,this.$router.replace({path:"/",query:{logged:this.logged}})}},created:function(){this.logged=this.$route.query.logged,this.username=this.$route.query.username}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[t.showsignin?o("div",{staticClass:"container"},[o("div",{staticClass:"card"},[o("h1",[t._v(" Sing In ")]),t._v(" "),o("div",{staticClass:"form-label-group"},[o("label",{attrs:{for:"inputUsername"}},[t._v("Username")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"username",id:"inputUsername",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-label-group"},[o("br"),t._v(" "),o("label",{attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),o("p"),t._v(" "),o("button",{staticClass:"btn btn-primary btn-lg ",on:{click:function(e){return t.checkLogin()}}},[t._v(" Sign In")]),t._v(" "),o("p"),t._v(" "),o("button",{staticClass:"btn btn-success btn-lg",on:{click:function(e){return t.createAccount()}}},[t._v(" Create Account")]),t._v(" "),o("p"),t._v(" "),o("button",{staticClass:"btn btn-secondary btn-lg",on:{click:function(e){return t.backtoEvents()}}},[t._v(" Back to Events")]),t._v(" "),o("p")])]):o("div",{staticClass:"container"},[o("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"input-group-1",label:"Username:","label-for":"input-1"}},[o("b-form-input",{attrs:{id:"input-1",placeholder:"Enter username",required:""},model:{value:t.addUserForm.username,callback:function(e){t.$set(t.addUserForm,"username",e)},expression:"addUserForm.username"}})],1),t._v(" "),o("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[o("b-form-input",{attrs:{id:"input-2",placeholder:"Enter password",required:""},model:{value:t.addUserForm.password,callback:function(e){t.$set(t.addUserForm,"password",e)},expression:"addUserForm.password"}})],1),t._v(" "),o("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),o("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Back")])],1)],1)])},staticRenderFns:[]};var v=o("VU/8")(m,p,!1,function(t){o("02OT")},"data-v-32039949",null).exports;r.default.use(s.a);var b=new s.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/",name:"Shows",component:h},{path:"/userlogin",name:"Login",component:v}]});r.default.use(a.a),r.default.config.productionTip=!1,new r.default({router:b,render:function(t){return t(n)}}).$mount("#app")},RPnE:function(t,e,o){t.exports=o.p+"static/img/cabecera.06a5803.png"},jTjO:function(t,e){},sWs5:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.82e7f63609db589fa31f.js.map